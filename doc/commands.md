---
layout: page
title: Battery Commands
---

Battery is controlled by issuing commands. A command is invoked by using its name immediately after the battery command.

    $ battery build

At the moment, there are three commands.

help
---

Prints a brief help message on a given command.

config
---

Configures a build. Run this command once before running the build command. At the moment, you should give it the paths to Watt and to Volta, and then the path to build (often the current). So standard use is

    $ battery config /path/to/volta /path/to/watt .

`--exe` and `--lib` can force the creation of an executable or library target, but Battery is smart enough to scan a path and figure out the right thing to do in most cases.

The battery.txt file can add some arguments to be picked up for the config stage by default, place each argument on its own line. For example,

    $ cat battery.txt
    --dep
    watt

All of the following arguments apply to the last target given.

*--name* Sets the target's name. This can be used to set the output name independent of the directory name.

*--dep* Add a target as a dependency.

*--src-I* Set the source directory of the target ('src', by default).

*--cmd* Run a command, and use that command's output as an argument.

*-l* Add a library.

*-L* Add a library search path.

*-J* Define a path for string import files to be found.

*-D* Define a version flag.

*-o* Set the output name.

*--debug* Do a debug build.

*--Xld* Give an argument to the ld linker.

*--Xcc* Give an argument to the cc linker.

*--Xlink* Give an argument to the MSVC link linker.

*--Xlinker* Give an argument to any linker.

You can conditionally add arguments for given arguments and linkers using the special `--if-FOO` command, replacing FOO with a platform or an arch. (See the Volta help output for a list).

    --if-linux
    --dep dl # Linux specific dependency.

The if args are cumulative so that multiple arch and platforms OR together. Like this:

    ('arch' || 'arch') && 'platform'

build
---

Execute the build generated by config, and generate the executable or library.